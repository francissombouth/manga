# ğŸ“Š MCD - BibliothÃ¨que NumÃ©rique Personnelle

## ğŸ¯ Vue d'ensemble du projet
**Objectif** : Application web full-stack pour gÃ©rer une collection personnelle d'Å“uvres culturelles (manga / manhwa) avec lecture par chapitres, marquage de statut et filtres de recherche.

---

## ğŸ“‹ EntitÃ©s et Attributs

### ğŸ‘¤ **USER** (Utilisateur)
- **id** : INT (PK, AUTO_INCREMENT)
- **email** : VARCHAR(180) UNIQUE NOT NULL
- **password** : VARCHAR(255) NOT NULL (hashÃ©)
- **nom** : VARCHAR(255) NOT NULL
- **roles** : JSON (tableau des rÃ´les)
- **created_at** : DATETIME
- **updated_at** : DATETIME

### âœï¸ **AUTEUR** (Auteur d'Å“uvre)
- **id** : INT (PK, AUTO_INCREMENT)
- **nom** : VARCHAR(255) NOT NULL
- **prenom** : VARCHAR(255) NULLABLE
- **nom_plume** : VARCHAR(255) NULLABLE (pseudonyme)
- **biographie** : TEXT NULLABLE
- **date_naissance** : DATE NULLABLE
- **nationalite** : VARCHAR(100) NULLABLE
- **created_at** : DATETIME
- **updated_at** : DATETIME

### ğŸ“š **OEUVRE** (Å’uvre culturelle)
- **id** : INT (PK, AUTO_INCREMENT)
- **titre** : VARCHAR(255) NOT NULL
- **auteur_id** : INT (FK vers AUTEUR)
- **type** : VARCHAR(50) NOT NULL (livre, manga, film, CD)
- **couverture** : VARCHAR(255) NULLABLE (URL/chemin image)
- **resume** : TEXT NULLABLE
- **date_publication** : DATE NULLABLE
- **isbn** : VARCHAR(20) NULLABLE
- **created_at** : DATETIME
- **updated_at** : DATETIME

### ğŸ“– **CHAPITRE** (Chapitre/Episode)
- **id** : INT (PK, AUTO_INCREMENT)
- **titre** : VARCHAR(255) NOT NULL
- **ordre** : INT NOT NULL (numÃ©ro d'ordre)
- **resume** : TEXT NULLABLE
- **pages** : JSON (tableau des pages/images)
- **oeuvre_id** : INT (FK vers OEUVRE)
- **created_at** : DATETIME
- **updated_at** : DATETIME

### ğŸ·ï¸ **TAG** (Ã‰tiquette)
- **id** : INT (PK, AUTO_INCREMENT)
- **nom** : VARCHAR(255) NOT NULL UNIQUE
- **created_at** : DATETIME

### ğŸ“Š **STATUT** (Statut de lecture)
- **id** : INT (PK, AUTO_INCREMENT)
- **nom** : VARCHAR(50) NOT NULL (Ã  lire, lu, en cours, prÃªtÃ© Ã ...)
- **user_id** : INT (FK vers USER)
- **oeuvre_id** : INT (FK vers OEUVRE)
- **created_at** : DATETIME
- **updated_at** : DATETIME

### ğŸ“š **COLLECTION_USER** (Collection personnelle)
- **id** : INT (PK, AUTO_INCREMENT)
- **user_id** : INT (FK vers USER)
- **oeuvre_id** : INT (FK vers OEUVRE)
- **date_ajout** : DATETIME NOT NULL
- **note_personnelle** : TEXT NULLABLE
- **created_at** : DATETIME

---

## ğŸ”— Relations et CardinalitÃ©s

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    USER     â”‚         â”‚   AUTEUR    â”‚         â”‚   OEUVRE    â”‚
â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
â”‚ â€¢ id (PK)   â”‚         â”‚ â€¢ id (PK)   â”‚    1    â”‚ â€¢ id (PK)   â”‚
â”‚ â€¢ email     â”‚         â”‚ â€¢ nom       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ â€¢ titre     â”‚
â”‚ â€¢ password  â”‚         â”‚ â€¢ prenom    â”‚    n    â”‚ â€¢ auteur_id â”‚
â”‚ â€¢ nom       â”‚         â”‚ â€¢ nom_plume â”‚         â”‚ â€¢ type      â”‚
â”‚ â€¢ roles     â”‚         â”‚ â€¢ biographieâ”‚         â”‚ â€¢ couvertureâ”‚
â”‚             â”‚         â”‚             â”‚         â”‚ â€¢ resume    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                               â”‚
       â”‚                                               â”‚ 1
       â”‚ n                                             â”‚
       â”‚                                               â–¼
       â”‚                                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                                        â”‚  CHAPITRE   â”‚
       â”‚                                        â”‚             â”‚
       â”‚                                        â”‚ â€¢ id (PK)   â”‚
       â”‚                                        â”‚ â€¢ titre     â”‚
       â”‚                                        â”‚ â€¢ ordre     â”‚
       â”‚                                        â”‚ â€¢ resume    â”‚
       â”‚                                        â”‚ â€¢ pages     â”‚
       â”‚                                        â”‚ â€¢ oeuvre_id â”‚
       â”‚                                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    n    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚COLLECTION_  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚   OEUVRE    â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ OEUVRE_TAG  â”‚
â”‚USER         â”‚         â”‚             â”‚         â”‚ (liaison)   â”‚
â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
â”‚ â€¢ user_id   â”‚         â”‚             â”‚         â”‚ â€¢ oeuvre_id â”‚
â”‚ â€¢ oeuvre_id â”‚         â”‚             â”‚         â”‚ â€¢ tag_id    â”‚
â”‚ â€¢ date_ajoutâ”‚         â”‚             â”‚         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                       â”‚                       â”‚
       â”‚ 1                     â”‚ n                     â”‚ n
       â”‚                       â”‚                       â”‚
       â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   STATUT    â”‚         â”‚     TAG     â”‚         â”‚     TAG     â”‚
â”‚             â”‚         â”‚             â”‚         â”‚             â”‚
â”‚ â€¢ id (PK)   â”‚         â”‚ â€¢ id (PK)   â”‚         â”‚ â€¢ id (PK)   â”‚
â”‚ â€¢ nom       â”‚         â”‚ â€¢ nom       â”‚         â”‚ â€¢ nom       â”‚
â”‚ â€¢ user_id   â”‚         â”‚             â”‚         â”‚             â”‚
â”‚ â€¢ oeuvre_id â”‚         â”‚             â”‚         â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š DÃ©tail des Relations

### 1. **AUTEUR â†” OEUVRE** (1:n)
- **Relation** : Un auteur peut crÃ©er plusieurs Å“uvres
- **CardinalitÃ©** : 1 AUTEUR â†’ n OEUVRE
- **ClÃ© Ã©trangÃ¨re** : `auteur_id` dans OEUVRE
- **Contrainte** : NOT NULL (une Å“uvre a obligatoirement un auteur)

### 2. **OEUVRE â†” CHAPITRE** (1:n)
- **Relation** : Une Å“uvre peut avoir plusieurs chapitres
- **CardinalitÃ©** : 1 OEUVRE â†’ n CHAPITRE
- **ClÃ© Ã©trangÃ¨re** : `oeuvre_id` dans CHAPITRE
- **Contrainte** : NOT NULL + CASCADE DELETE (suppression des chapitres si Å“uvre supprimÃ©e)

### 3. **USER â†” OEUVRE** (n:n) via COLLECTION_USER
- **Relation** : Un utilisateur peut avoir plusieurs Å“uvres dans sa collection, une Å“uvre peut Ãªtre dans plusieurs collections
- **CardinalitÃ©** : n USER â†” n OEUVRE
- **Table de liaison** : `collection_user` avec (`user_id`, `oeuvre_id`, `date_ajout`, `note_personnelle`)
- **Contraintes** : ClÃ© primaire composite sur (user_id, oeuvre_id)

### 4. **OEUVRE â†” TAG** (n:n)
- **Relation** : Une Å“uvre peut avoir plusieurs tags, un tag peut Ãªtre associÃ© Ã  plusieurs Å“uvres
- **CardinalitÃ©** : n OEUVRE â†” n TAG
- **Table de liaison** : `oeuvre_tag` avec (`oeuvre_id`, `tag_id`)
- **Contraintes** : ClÃ© primaire composite, contraintes de clÃ©s Ã©trangÃ¨res

### 5. **USER â†” STATUT** (1:n)
- **Relation** : Un utilisateur peut crÃ©er plusieurs statuts
- **CardinalitÃ©** : 1 USER â†’ n STATUT
- **ClÃ© Ã©trangÃ¨re** : `user_id` dans STATUT

### 6. **OEUVRE â†” STATUT** (1:n)
- **Relation** : Une Å“uvre peut avoir plusieurs statuts (historique par utilisateur)
- **CardinalitÃ©** : 1 OEUVRE â†’ n STATUT
- **ClÃ© Ã©trangÃ¨re** : `oeuvre_id` dans STATUT
- **Note** : Permet de garder un historique des changements de statut par utilisateur

---

## ğŸ¯ RÃ¨gles de Gestion

### Authentification & SÃ©curitÃ©
- Un utilisateur doit avoir un email unique
- Le mot de passe doit Ãªtre hashÃ© (bcrypt/argon2)
- SystÃ¨me de rÃ´les (USER, ADMIN)

### Gestion des Auteurs
- Un auteur peut avoir un nom_plume (pseudonyme) diffÃ©rent de son vrai nom
- Les informations biographiques sont optionnelles
- Un auteur peut crÃ©er plusieurs Å“uvres

### Gestion des Å’uvres
- Une Å“uvre appartient obligatoirement Ã  un auteur
- Le type d'Å“uvre est limitÃ© : livre, manga, film, CD
- La couverture est optionnelle (URL ou chemin fichier)
- Une Å“uvre peut Ãªtre dans plusieurs collections d'utilisateurs

### Collection Personnelle
- Un utilisateur peut ajouter des Å“uvres Ã  sa collection personnelle
- Date d'ajout automatique lors de l'ajout Ã  la collection
- Note personnelle optionnelle par Å“uvre et par utilisateur
- Un utilisateur ne peut pas avoir la mÃªme Å“uvre deux fois dans sa collection

### Gestion des Chapitres
- Les chapitres sont ordonnÃ©s (champ `ordre`)
- Le champ `pages` contient un JSON avec les URLs/chemins des pages
- Suppression en cascade : si Å“uvre supprimÃ©e â†’ chapitres supprimÃ©s

### SystÃ¨me de Tags
- Les tags sont partagÃ©s entre toutes les Å“uvres
- Un tag ne peut pas Ãªtre dupliquÃ© (nom unique)
- Relation many-to-many avec les Å“uvres

### Statuts Personnalisables
- Chaque utilisateur peut crÃ©er ses propres statuts pour ses Å“uvres
- Statuts suggÃ©rÃ©s : "Ã  lire", "lu", "en cours", "abandonnÃ©", "prÃªtÃ© Ã  [nom]"
- Historique des changements de statut conservÃ© par utilisateur

---

## ğŸ” Index RecommandÃ©s

```sql
-- Index pour les recherches frÃ©quentes
CREATE INDEX idx_oeuvre_auteur_id ON oeuvre(auteur_id);
CREATE INDEX idx_oeuvre_type ON oeuvre(type);
CREATE INDEX idx_oeuvre_titre ON oeuvre(titre);
CREATE INDEX idx_auteur_nom ON auteur(nom, prenom);
CREATE INDEX idx_auteur_nom_plume ON auteur(nom_plume);
CREATE INDEX idx_chapitre_oeuvre_id ON chapitre(oeuvre_id);
CREATE INDEX idx_chapitre_ordre ON chapitre(oeuvre_id, ordre);
CREATE INDEX idx_collection_user_id ON collection_user(user_id);
CREATE INDEX idx_collection_oeuvre_id ON collection_user(oeuvre_id);
CREATE INDEX idx_statut_user_oeuvre ON statut(user_id, oeuvre_id);
CREATE INDEX idx_tag_nom ON tag(nom);

-- Index composites pour les filtres
CREATE INDEX idx_oeuvre_auteur_type ON oeuvre(auteur_id, type);
CREATE INDEX idx_oeuvre_search ON oeuvre(titre, auteur_id);
CREATE INDEX idx_collection_user_date ON collection_user(user_id, date_ajout);
```

---

## ğŸ“ˆ Extensions Futures Possibles

### EntitÃ©s Additionnelles
- **SERIE** : Regroupement d'Å“uvres en sÃ©ries (tome 1, 2, 3...)
- **EDITEUR** : Maisons d'Ã©dition
- **COMMENTAIRE** : Avis et notes sur les Å“uvres
- **PROGRESSION** : Suivi dÃ©taillÃ© de la lecture (page actuelle, temps passÃ©)
- **NOTIFICATION** : Rappels et alertes
- **RECOMMENDATION** : Suggestions d'Å“uvres

### Relations SupplÃ©mentaires
- **USER â†” USER** : SystÃ¨me d'amis/followers
- **OEUVRE â†” OEUVRE** : Relations entre Å“uvres (suite, prÃ©quel, adaptation)
- **CHAPITRE â†” USER** : Marquage "lu/non lu" par chapitre
- **AUTEUR â†” USER** : Auteurs favoris

---

## ğŸ› ï¸ ImplÃ©mentation Technique

### Backend (Symfony/Doctrine)
- EntitÃ©s avec annotations Doctrine
- Relations bidirectionnelles avec ArrayCollection
- Repositories pour les requÃªtes complexes
- API REST avec sÃ©rialisation JSON

### Frontend (React)
- Ã‰tat global pour la gestion des donnÃ©es
- Composants rÃ©utilisables pour chaque entitÃ©
- Formulaires avec validation
- Interface de lecture des chapitres

### Base de DonnÃ©es
- MySQL/PostgreSQL avec contraintes d'intÃ©gritÃ©
- Migrations Doctrine pour l'Ã©volution du schÃ©ma
- Sauvegarde rÃ©guliÃ¨re des donnÃ©es utilisateur 